<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obsera Ad Portal - Bilal Thattukada</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Roboto', sans-serif; }
        h1, h2, h3 { font-family: 'Oswald', sans-serif; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen">

    <nav class="bg-blue-800 text-white p-4 shadow-md">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold tracking-wider uppercase">Obsera Solutions</h1>
            <span class="text-sm bg-blue-900 px-3 py-1 rounded-full">Ad Partner Portal</span>
        </div>
    </nav>

    <main class="max-w-4xl mx-auto mt-8 p-4 grid md:grid-cols-2 gap-8">
        
        <div class="space-y-6">
            <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-blue-800">
                <h2 class="text-2xl font-bold mb-2 uppercase text-gray-900">Where Your Ad Shows</h2>
                
                <p class="text-gray-600 leading-relaxed mt-4">
                    Your advertisement will be displayed on the high-definition digital menu screen located inside <strong>Bilal Thattukada</strong>. This screen is viewed by hundreds of daily walk-in customers while they wait for their orders.
                </p>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-yellow-500">
                <h2 class="text-2xl font-bold mb-2 uppercase text-gray-900">How It Works</h2>
                <ul class="space-y-3 text-gray-600">
                    <li class="flex items-start">
                        <span class="text-yellow-500 font-bold mr-2">1.</span>
                        Your full-screen poster will play in rotation between the restaurant's food menu categories.
                    </li>
                    <li class="flex items-start">
                        <span class="text-yellow-500 font-bold mr-2">2.</span>
                        Submit your poster using the form on this page.
                    </li>
                    <li class="flex items-start">
                        <span class="text-yellow-500 font-bold mr-2">3.</span>
                        Our team will manually review the content for quality. Once approved, it will go live on the screen!
                    </li>
                </ul>
            </div>
        </div>

        <div class="bg-white p-8 rounded-xl shadow-lg relative">
            
            <div id="statusMessage" class="hidden absolute inset-0 bg-white rounded-xl flex flex-col items-center justify-center p-8 text-center z-10">
                <div class="text-green-500 text-6xl mb-4">âœ“</div>
                <h2 class="text-3xl font-bold text-gray-900 mb-2">Successfully Submitted!</h2>
                <p class="text-gray-600">Your advertisement has been sent to Obsera Solutions for review. We will contact you once it is live on the screen.</p>
                <button onclick="location.reload()" class="mt-6 text-blue-800 font-bold underline">Submit another ad</button>
            </div>

            <h2 class="text-3xl font-bold mb-6 text-gray-900 uppercase">Submit Your Ad</h2>
            
            <form id="adForm" class="space-y-5">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">Your Business Name</label>
                    <input type="text" id="businessName" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:outline-none" placeholder="e.g., Royal Mobiles">
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">Ad Duration</label>
                    <select id="duration" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:outline-none bg-gray-50">
                        <option value="10">10 Seconds (Default)</option>
                        <option value="15">15 Seconds</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">Upload Ad Poster (Image)</label>
                    <input type="file" id="fileInput" accept="image/*" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-800 hover:file:bg-blue-100">
                    <p class="text-xs text-gray-500 mt-1">Recommended size: 1920x1080px (Landscape). JPG or PNG.</p>
                </div>

                <button type="submit" id="submitBtn" class="w-full bg-blue-800 hover:bg-blue-900 text-white font-bold py-3 px-4 rounded-lg transition-colors text-lg uppercase tracking-wide mt-4">
                    Submit Request
                </button>
            </form>
        </div>

    </main>

<script>
    // --- 1. CONFIGURATION ---
    // You need a free ImgBB API key to convert the image to a link automatically
    const IMGBB_API_KEY = "6aa95dc0f064beb2af336e93b2833e13"; 
    const TARGET_EMAIL = "contact.obserasolutions@gmail.com";

    document.getElementById("adForm").addEventListener("submit", async function(e) {
        e.preventDefault(); // Stop page from reloading
        
        const submitBtn = document.getElementById("submitBtn");
        const statusDiv = document.getElementById("statusMessage");
        const form = document.getElementById("adForm");
        
        const businessName = document.getElementById("businessName").value;
        const duration = document.getElementById("duration").value;
        const fileInput = document.getElementById("fileInput").files[0];
        
        if (!fileInput) return;

        try {
            // -- STEP 1: UPLOAD TO IMGBB --
            submitBtn.innerText = "Uploading Poster... Please wait";
            submitBtn.disabled = true;
            submitBtn.classList.add("opacity-75", "cursor-not-allowed");

            const formData = new FormData();
            formData.append("image", fileInput);
            
            const imgResponse = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API_KEY}`, {
                method: "POST",
                body: formData
            });
            
            const imgData = await imgResponse.json();
            if (!imgData.success) throw new Error("Image upload failed");
            
            const imageUrl = imgData.data.url; // This is the direct link we need!

            // -- STEP 2: SEND EMAIL VIA FORMSUBMIT AJAX --
            submitBtn.innerText = "Sending Details to Obsera... ðŸš€";

            const emailResponse = await fetch(`https://formsubmit.co/ajax/${TARGET_EMAIL}`, {
                method: "POST",
                headers: { 
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify({
                    _subject: `New Screen Ad Request: ${businessName}`,
                    "Business Name": businessName,
                    "Requested Duration": duration + " Seconds",
                    "Direct Poster Link": imageUrl, // You copy-paste this into Google Sheets
                    "_captcha": "false", // Bypasses recaptcha for background processing
                    "_template": "table" // Makes the email look professional
                })
            });

            const emailData = await emailResponse.json();
            if (!emailData.success) throw new Error("Email sending failed");

            // -- STEP 3: SHOW SUCCESS --
            form.style.display = "none";
            statusDiv.classList.remove("hidden");

        } catch (error) {
            console.error(error);
            alert("Oops! Something went wrong. Please check your internet connection and try again.");
            submitBtn.innerText = "Submit Request";
            submitBtn.disabled = false;
            submitBtn.classList.remove("opacity-75", "cursor-not-allowed");
        }
    });
</script>
</body>
</html>
